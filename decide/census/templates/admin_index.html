{% extends 'base.html' %}
{% load i18n static %}
{% include 'admin/change_list.html' %}
{% load i18n admin_urls static admin_list %}

{% block content %}
  
  <a href="/admin/logout" class="waves-effect waves-light btn">Log out</a>
  <br><br>
  <nav>
    <div class="nav-wrapper">
      <div class="col s1">
        <a href="/admin" class="breadcrumb">Home</a>
        <a href="{% url 'listCensus' %}" class="breadcrumb">Census</a>
      </div>
    </div>
  </nav>

    <div class="nav-wrapper">    
      <form id="changelist-form" method="post"{% if cl.formset.is_multipart %} enctype="multipart/form-data"{% endif %} novalidate>{% csrf_token %}
      {% if cl.formset %}
        <div id="searchbar">
      {{ cl.formset.management_form }}
      </div>
      {% endif %}
      </form>
        </div>
      </form>
    </div>

<bR>    
{% for message in messages %}

    <div class="alert alert-success">
        <a class="close" href="#" data-dismiss="alert">Ã—</a>

        <h4>{{ message }}</h4>

            </div>
{% endfor %}

<br>
<br>
<a href="{% url 'passVotings' %}" class="waves-effect waves-light btn">{% trans 'Add census with filters' %}</a> <a href="{% url 'addCustomCensus' %}" class="waves-effect waves-light btn">{% trans 'Add custom census' %}</a> <button onclick="window.location='{% url 'exportCSV' %}'"
  title="Exportar CSV" class="waves-effect waves-dark btn">
  {% trans 'Export all' %}</button> <a href="{% url 'importCSVView' %}" class="waves-effect waves-light btn">{% trans 'Import all' %}</a><br>
<br>

{% if cl.result_list %}

<div id="censusTable>">

<table class="centered">
        <thead>
          <tr>
              <th>{% trans 'Voting' %}</th>
              <th>{% trans 'Voters' %}</th>
              <th>{% trans 'Edit' %}</th>
              <th>{% trans 'Delete' %}</th>
          </tr>
        </thead>
        <tbody>


        {% for object in cl.result_list %}
        <tr>
        <td>{{ object.voting_id }}</td>
        <td><a href="{% url 'viewVoters' %}?voting_id={{ object.voting_id }}" class="waves-effect waves-light btn">{% trans 'View Voters' %}</a></td>
        <td><a href="{% url 'editCensus' %}?id={{ object.id }}" class="waves-effect waves-light btn">{% trans 'Edit census' %}</a></td>
        <td><a href="{% url 'deleteCensus' %}?id={{ object.id }}" class="waves-effect waves-light btn">{% trans 'Delete census' %}</a></td>
        </tr>

        {% endfor %}

          
        </tbody>
      </table>
</div>
{% else %}

<h4><div id=nocensus">{% trans 'No census to show' %}</div></h4>

{% endif %}


{% endblock %}